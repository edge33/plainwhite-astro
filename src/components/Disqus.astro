---
import plainwhiteConfig from '../plainwhite.config';

const {
    plainwhite: { disqus_shortname },
} = plainwhiteConfig;

const pageUrl = Astro.request.url;
---

<div id="disqus_thread"></div>

<noscript>
    Please enable JavaScript to view the
    <a href="https://disqus.com/?ref_noscript" rel="nofollow">
        comments powered by Disqus.
    </a>
</noscript>

<script is:inline define:vars={{ disqus_shortname, pageUrl }}>
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    const disqus_config = function () {
        // Replace PAGE_URL with your page's canonical URL variable
        this.page.url = pageUrl;

        // Replace PAGE_IDENTIFIER with your page's unique identifier variable
        this.page.identifier = pageUrl;
    };

    (function () {
        // REQUIRED CONFIGURATION VARIABLE: EDIT THE SHORTNAME BELOW
        const d = document,
            s = d.createElement('script');

        // IMPORTANT: Replace EXAMPLE with your forum shortname!
        s.src = `https://${disqus_shortname}.disqus.com/embed.js`;

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
